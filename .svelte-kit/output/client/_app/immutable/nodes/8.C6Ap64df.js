import"../chunks/Bzak7iHL.js";import{p as Te,d as p,t as f,a as u,b as Xe,e as Be,s,g as r,$ as Fe,r as e,i as v,j,h as g,l as oe,n as He,m as Re}from"../chunks/DCMERdpK.js";import{d as qe,s as c}from"../chunks/8jpNibKI.js";import{i as k}from"../chunks/CXnZBGaQ.js";import{e as le,i as ne}from"../chunks/Bl9qzA8i.js";import{h as Le}from"../chunks/B1_jHp8y.js";import{a as Oe,e as Ve}from"../chunks/x6CrTqHQ.js";import{s as S,r as U,a as E}from"../chunks/kEpiv2GH.js";import{s as de}from"../chunks/DDc__TWD.js";import{b as ve}from"../chunks/D99Ln1cZ.js";import{g as ce}from"../chunks/CzxsKxIF.js";var Ue=p('<img alt="" class="w-full h-full rounded-xl object-cover"/>'),Ee=p('<span class="text-xl text-primary-600"> </span>'),Ge=p('<button type="button"><p class="text-xs text-gray-500 uppercase"> </p> <p class="font-semibold text-gray-900"> </p></button>'),Je=p('<button type="button"> </button>'),Ke=p('<div class="grid grid-cols-3 sm:grid-cols-4 gap-2"></div>'),Qe=p('<div class="text-center py-8"><div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <p class="text-gray-500">No hay horarios disponibles para esta fecha</p> <p class="text-sm text-gray-400 mt-1">Prueba con otro día</p></div>'),We=p('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"> </div>'),Ye=p('<span class="inline-flex items-center gap-2"><svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Procesando...</span>'),Ze=p('<form method="POST" class="bg-white rounded-xl border border-gray-100 p-6 space-y-4"><h2 class="font-semibold text-gray-900">Completa tu reserva</h2> <input type="hidden" name="therapistId"/> <input type="hidden" name="serviceId"/> <input type="hidden" name="scheduledAt"/> <!> <div><label for="address" class="block text-sm font-medium text-gray-700 mb-1.5">Dirección del servicio</label> <textarea id="address" name="address" required placeholder="Ingresa la dirección donde quieres recibir el servicio" class="input-wellness resize-none"></textarea></div> <div><label for="notes" class="block text-sm font-medium text-gray-700 mb-1.5">Notas adicionales (opcional)</label> <textarea id="notes" name="notes" placeholder="Alguna indicación especial para el terapeuta..." class="input-wellness resize-none"></textarea></div> <div class="bg-gray-50 rounded-lg p-4"><div class="flex justify-between text-sm mb-2"><span class="text-gray-600">Fecha</span> <span class="font-medium"> </span></div> <div class="flex justify-between text-sm mb-2"><span class="text-gray-600">Hora</span> <span class="font-medium"> </span></div> <div class="flex justify-between text-sm mb-2"><span class="text-gray-600">Duración</span> <span class="font-medium"> </span></div> <hr class="my-3"/> <div class="flex justify-between"><span class="font-semibold text-gray-900">Total</span> <span class="font-bold text-primary-600 text-lg"> </span></div></div> <button type="submit" class="w-full btn-primary-gradient py-3 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <p class="text-xs text-gray-500 text-center">Al confirmar, aceptas los términos de servicio y la política de cancelación</p></form>'),$e=p('<div class="max-w-2xl mx-auto space-y-6"><a class="inline-flex items-center text-gray-600 hover:text-primary-600 transition-colors"><svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> Volver al perfil</a> <h1 class="text-2xl font-bold text-gray-900">Nueva Reserva</h1> <div class="bg-white rounded-xl border border-gray-100 p-6"><div class="flex items-center gap-4"><div class="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center flex-shrink-0"><!></div> <div class="flex-1"><h3 class="font-semibold text-gray-900"> </h3> <p class="text-gray-600"> </p> <p class="text-sm text-gray-500"> </p></div> <div class="text-right"><p class="text-lg font-bold text-primary-600"> </p></div></div></div> <div class="bg-white rounded-xl border border-gray-100 p-6"><h2 class="font-semibold text-gray-900 mb-4">Selecciona una fecha</h2> <div class="flex gap-2 overflow-x-auto pb-2"></div></div> <div class="bg-white rounded-xl border border-gray-100 p-6"><h2 class="font-semibold text-gray-900 mb-4">Horarios disponibles</h2> <!></div> <!></div>');function ca(me,i){Te(i,!0);let b=j(null),C=j(""),G=j(""),D=j(!1);const ue=Array.from({length:7},(t,a)=>{const l=new Date;return l.setDate(l.getDate()+a+1),l.toISOString().split("T")[0]});function M(t){return new Date(t).toLocaleDateString("es-MX",{weekday:"short",month:"short",day:"numeric"})}function J(t){return new Date(t).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",hour12:!0})}function K(t){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(t)}function pe(t){g(b,null),ce(`/booking/new?therapist=${i.data.therapist.id}&service=${i.data.service.id}&date=${t}`)}var N=$e();Le("1vr3nw0",t=>{Be(()=>{Fe.title="Nueva Reserva - Plenura"})});var Q=r(N),z=s(Q,4),W=r(z),A=r(W),xe=r(A);{var fe=t=>{var a=Ue();f(()=>S(a,"src",i.data.therapist.users.avatar_url)),u(t,a)},be=t=>{var a=Ee(),l=r(a,!0);e(a),f(n=>c(l,n),[()=>{var n;return(((n=i.data.therapist.users)==null?void 0:n.full_name)??"?")[0].toUpperCase()}]),u(t,a)};k(xe,t=>{var a;(a=i.data.therapist.users)!=null&&a.avatar_url?t(fe):t(be,!1)})}e(A);var I=s(A,2),P=r(I),_e=r(P,!0);e(P);var T=s(P,2),ge=r(T,!0);e(T);var Y=s(T,2),he=r(Y);e(Y),e(I);var Z=s(I,2),$=r(Z),ye=r($,!0);e($),e(Z),e(W),e(z);var X=s(z,2),ee=s(r(X),2);le(ee,21,()=>ue,ne,(t,a)=>{var l=Ge();l.__click=()=>pe(v(a));var n=r(l),m=r(n,!0);e(n);var x=s(n,2),h=r(x,!0);e(x),e(l),f((y,w)=>{de(l,1,`flex-shrink-0 px-4 py-3 rounded-xl border-2 transition-all text-center min-w-[90px] ${i.data.selectedDate===v(a)?"border-primary-500 bg-primary-50":"border-gray-100 hover:border-gray-200"}`),c(m,y),c(h,w)},[()=>M(v(a)).split(" ")[0],()=>M(v(a)).split(" ").slice(1).join(" ")]),u(t,l)}),e(ee),e(X);var B=s(X,2),we=s(r(B),2);{var ke=t=>{var a=Ke();le(a,21,()=>i.data.availableSlots,ne,(l,n)=>{var m=Je();m.__click=()=>g(b,v(n),!0);var x=r(m,!0);e(m),f(h=>{de(m,1,`px-3 py-2 rounded-lg border-2 text-sm font-medium transition-all ${v(b)===v(n)?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-100 hover:border-gray-200 text-gray-700"}`),c(x,h)},[()=>J(v(n))]),u(l,m)}),e(a),u(t,a)},De=t=>{var a=Qe();u(t,a)};k(we,t=>{i.data.availableSlots.length>0?t(ke):t(De,!1)})}e(B);var je=s(B,2);{var Se=t=>{var a=Ze(),l=s(r(a),2);U(l);var n=s(l,2);U(n);var m=s(n,2);U(m);var x=s(m,2);{var h=o=>{var d=We(),_=r(d,!0);e(d),f(()=>c(_,i.form.error)),u(o,d)};k(x,o=>{var d;(d=i.form)!=null&&d.error&&o(h)})}var y=s(x,2),w=s(r(y),2);oe(w),S(w,"rows",2),e(y);var F=s(y,2),H=s(r(F),2);oe(H),S(H,"rows",2),e(F);var R=s(F,2),q=r(R),ae=s(r(q),2),Ce=r(ae,!0);e(ae),e(q);var L=s(q,2),te=s(r(L),2),Me=r(te,!0);e(te),e(L);var O=s(L,2),re=s(r(O),2),Ne=r(re);e(re),e(O);var se=s(O,4),ie=s(r(se),2),ze=r(ie,!0);e(ie),e(se),e(R);var V=s(R,2),Ae=r(V);{var Ie=o=>{var d=Ye();u(o,d)},Pe=o=>{var d=Re("Confirmar Reserva");u(o,d)};k(Ae,o=>{v(D)?o(Ie):o(Pe,!1)})}e(V),He(2),e(a),Oe(a,(o,d)=>{var _;return(_=Ve)==null?void 0:_(o,d)},()=>()=>(g(D,!0),async({result:o,update:d})=>{g(D,!1),o.type==="redirect"?ce(o.location):await d()})),f((o,d,_)=>{E(l,i.data.therapist.id),E(n,i.data.service.id),E(m,v(b)),c(Ce,o),c(Me,d),c(Ne,`${i.data.service.duration_minutes??""} minutos`),c(ze,_),V.disabled=v(D)||!v(C)},[()=>M(i.data.selectedDate),()=>J(v(b)),()=>K(i.data.service.price_cents/100)]),ve(w,()=>v(C),o=>g(C,o)),ve(H,()=>v(G),o=>g(G,o)),u(t,a)};k(je,t=>{v(b)&&t(Se)})}e(N),f(t=>{var a,l;S(Q,"href",`/therapists/${i.data.therapist.id??""}`),c(_e,(a=i.data.therapist.users)==null?void 0:a.full_name),c(ge,(l=i.data.service.services)==null?void 0:l.name),c(he,`${i.data.service.duration_minutes??""} minutos`),c(ye,t)},[()=>K(i.data.service.price_cents/100)]),u(me,N),Xe()}qe(["click"]);export{ca as component};
